.. sectionauthor:: Артём Светлов <@nextgis.ru>

.. formbuilder-mobile-howto:

этот текст наверно будет перенесён в папку с тренингами

Инструкция по организации полевого сбора данных в formbuilder+nextgis mobile
====================================================================

Это пошаговая инструкция по тому, какие действия надо сделать, что бы начать сбор полевых данных с использованием formbuilder.


Введение
----------------------------

В этой инструкции мы расскажем о том, как организовать сбор полевых данных. 
Пользователь сможет собирать в поле геоданные с помощью мобильного устройства по нужной вам форме, и они автоматически будут передаваться в сеть.
Примечание оператору:
Слово "Инстанс" говорить не надо, нужно говорить "Веб-Гис".

Необходимое оборудование
----------------------------

1. Персональный компьютер с интернетом.
2. Android c настроеннным интернетом. Постоянное подключение "в поле", через 3G не обязательно.
3. У пользователя должен быть доступ к e-mail при начальной настройке.
4. Шнур от Android.

Заведение Веб ГИС
--------------------------
* Зайти на сайт nextgis.com.
* Зарегистрировать пользователя.
* Пользователь заходит в свой e-mail, подтверждает почту.
* Создать веб-гис. Придумать логин, название, выбрать язык.
* Записать в файл на компьютере url, логин, пароль от веб-гис.

Создание аккаунта в nextgis.com
-------------------------------

* Создайте аккаунт для сборщиков. Дайте ему права на корневую группу ресурсов, и на группу ресурсов с данными.

```
main resourse group
connection read  - no propagandate
resourse read all
data structure read all

data folder
all permissions all
```

Создание формы
---------------------------
* Необходимо установить актуальную версию NextGIS Formbuilder. Как определить, актуальная ли она, во время написания инструкции мы не придумали.
* Авторизируйтесь в formbuilder, если тариф вашего аккаунта позволяет, то некоторые кнопки разблокируются.
* Новая форма. Выберите тип геометрии, который вам нужен. Если не знаете какой выбрать, то используйте "точка".
* Добавляйте пикеры. Между пикерами добавляйте надписи.
* Придумать набор полей, записать на бумажку

* Вкладка Данные --> Поля. 
* Добавьте поля, придумайте тип данных, нажимайте плюсик.

name,string
date,datetime
category,string

* Вкладка Данные --> To Web. Укажите url, логин, пароль от веб-гис. Выберите чего-то в списке ресурсов. 
* Сообщение: "Вы хотите обновить форму данными из веба?" - подтвердить.
* Накидать на форму элементы, каждый элемент связать с полем.
* Кинуть элемент "Фото".
* Сохранить как .ngfp



Установка мобильного
----------------------------

* play market --> nextgis Mobile


..note: Если на мобильном устройстве уже было приложение, возможно его надо переставить, потому что оно не обновлялось 

Передача формы на мобильный
-----------------------------

* Подключить мобильное устройство шнуром к ПК.
* Поместить ngfp в память устройства.
* Открыть мобильное приложение.
* Какая-то кнопка, добавить локальный слой, открыть файл ngfp.
* Правая кнопка - настройки - подключение к ngw - выбрать наше подключение --> включить синхронизацию --> поставить галочку у слоя.


..note:: можно передавать и через интернет, но это сложно объяснять, я про дропбоксы не знаю


Сбор данных
-----------------------------

* Нажать кнопку "добавить в текущее положение".
* Ввести всё в форму.
* Нажать "Подтвердить".
* Добавить в конторе пару точек.
* Нажать кнопку ручной синхронизации.

..note:: ввод точек на карте - не нужен в этой инструкции


Создание карты в веб-гис
------------------------------

* Зайти в админку веб-гис.
* Залогиниться.
* Найти в списке ресурсов векторный слой --> зайти в него --> справа ссылка "Стиль MapServer".
* Задать название такое же, как у слоя, нажать кнопку "Создать".
* Перейти на главную страницу админки --> справа ссылка "Веб-карта".
* Задать название. Перейти на вкладку "Слои". Нажать "Добавить слой". Раскрыть слой, что мы создали до конка. Выбрать стиль - кнопка "Ок" подсветится. Выставить режим "Тайлы". Выставить "Включено".
* Перейти на вкладку "Охват". Нажать маленькую кнопочку чуть выше середины. Выбрать слой (не стиль, а слой). Нажать "Ок".
* Найти ссылку Просмотр и запомнить её.
..note:: Я не представляю, как это описать русским языком.

* можно нажимать мышкой на объект, и будет окошко


Можно выходить в поле. 
Можно удалить все файлы, которые кидали в память. 
