.. sectionauthor:: Артём Светлов <artem.svetlov@nextgis.ru>

.. _data_collection:

Организация сбора данных
=========================

Введение
----------------------------

В этой инструкции мы расскажем о том, как организовать сбор полевых данных. 
Человек сможет собирать в поле геоданные на мобильном устройстве по нужной вам форме, и они автоматически будут передаваться в сеть.

Необходимое оборудование
----------------------------

1. Персональный компьютер с интернетом
2. Android c настроеннным интернетом. Постоянное подключение "в поле", через 3G не обязательно.
3. У юзера должен быть доступ к e-mail при начальной настройке
4. Шнур от Android

Заведение Веб ГИС.
---------------------------

* Зайти на nextgis.com
* Зарегистрировать юзера
* Юзер заходит в свой e-mail, подтверждает почту
* Создать веб-гис. Придумать логин, название, выбрать язык.
* Записать в файл на компьютере url, логин, пароль от веб-гис

Установка Формбилдера.
---------------------------

* для windows: google://nextgis formbuilder
* для ubuntu: sudo apt-add repository; sudo apt-get install formbuilder; fb
* Скачать и поставить formbuilder

Создание формы.
---------------------------
* Придумать набор полей, записать на бумажку ..note:: добавлять их потом нельзя.
* Новая форма. Выберите тип геометрии любой, который вам нужен, скорее всего точка
* Вкладка Данные --> Поля. 
* Добавьте поля, придумайте тип данных, нажимайте плюсик

name,string
date,datetime
category,string

* Вкладка Данные --> To Web. Укажите url, логин, пароль от веб-гис. Выберите чего-то в списке ресурсов. 
* Сообщение: "Вы хотите обновить форму данными из веба?" - подтвердить.
* Накидать на форму элементы, каждый элемент связать с полем
* Кинуть элемент "Фото"
* Сохранить как .ngfp



Установка мобильного.
----------------------------

* play market --> nextgis Mobile


..note: Если на мобильном устройстве уже было приложение, возможно его надо переставить, потому что оно не обновлялось 

Передача формы на мобильный.
-----------------------------

* Подключить мобильное устройство шнуром к ПК
* Поместить ngfp в память устройства
* Открыть мобильное приложение
* Какая-то кнопка, добавить локальный слой, открыть файл ngfp.
* Правая кнопка - настройки - подключение к ngw - выбрать наше подключение --> включить синхронизацию --> поставить галочку у слоя


..note:: можно передавать и через интернет, но это сложно объяснять, я про дропбоксы не знаю


Сбор данных.
-----------------------------

* Нажать кнопку "добавить в текущее положение"
* Ввести всё в форму.
* Нажать "Подтвердить".
* Добавить в конторе пару точек
* Нажать кнопку ручной синхронизации

..note:: ввод точек на карте - не нужен в этой инструкции


Создание карты в веб-гис
------------------------------

* Зайти в админку веб-гис
* Залогиниться
* Найти в списке ресурсов векторный слой --> зайти в него --> справа ссылка "Стиль MapServer"
* Задать название такое же как у слоя, нажать кнопку "Создать".
* Перейти на главную страницу админки --> справа ссылка "Веб-карта"
* Задать название. Перейти на вкладку "Слои". Нажать "Добавить слой". Раскрыть слой, что мы создали до конка. Выбрать стиль - кнопка "Ок" подсветится. Выставить режим "Тайлы". Выставить "Включено".
* Перейти на вкладку "Охват". Нажать маленькую кнопочку чуть выше середины. Выбрать слой (не стиль, а слой). Нажать "Ок".
* Найти ссылку Просмотр, и запомнить её
..note:: Я не представляю, как это описать русским языком.

* можно нажимать мышкой на объект, и будет окошко


Можно выходить в поле. 
Можно удалить все файлы, которые кидали в память. 

